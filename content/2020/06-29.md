## Projects

### mmcc

- `break`, `continue`を追加。コード生成前までの変更点は構文解析時にそれぞれのノードを追加するくらい。
  - `break`は`break`用のシーケンス番号を保持するグローバル変数を定義して、for-loop や while の最後のラベルと番号を合わせるようにする。`break`のノードは単に番号にジャンプする命令になる。
  - `continue`も同じようなグローバル変数を定義して、ループの先頭にジャンプする命令の前に`continue`用のラベルを追加して、`continue`のノードはそこにジャンプする命令になる。
- `goto`とラベルを追加。それぞれ goto 先へのジャンプ命令、ラベルの追加だけ。
- `switch-case`を追加。C の`switch`は`if-else`というよりは`goto`のかたまりみたいなもので、`break`がなければ次のケースラベルの処理に移る。構文解析のときは`switch`用のノードを準備しておき、その中で書かれているケースはノードに新しく追加したポインタ変数に連結させる形で追加していく。コード生成では連結させたポインタ変数について先にラベルにジャンプする命令を生成し、その後各文に対するコードを生成する。`case`文に対応するノードはラベルとその後の文についてコード生成する。
- キャストを追加。キャスト後の型に読み替えるだけだが、コード生成では符号拡張する命令になる。[ここのコラム](https://www.sigbus.info/compilerbook#%E3%82%B9%E3%83%86%E3%83%83%E3%83%9724-%E6%96%87%E5%AD%97%E5%9E%8B%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B)参考。
- キャストの追加に伴い`short`と`long`を追加。
